(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[564],{62037:function($,M,t){"use strict";t.r(M);var H=t(34792),v=t(48086),z=t(71194),Z=t(5644),G=t(47673),I=t(4107),Q=t(53400),U=t(94168),a=t(11849),j=t(3182),X=t(57663),g=t(71577),k=t(9715),d=t(86585),C=t(2824),L=t(94043),B=t.n(L),T=t(67294),K=t(49101),W=t(27420),E=t(11238),b=t(67265),y=t(30381),A=t.n(y),_=t(85893);function p(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,f=u?"?":"",r=[];return Object.keys(P).forEach(function(i){var o=P[i];["",void 0,null].indexOf(o)===-1&&(o.constructor===Array?o.forEach(function(O){r.push("".concat(i,"[]=").concat(O))}):r.push("".concat(i,"=").concat(o)))}),r.length?f+r.join("&"):""}var x=function(){var u={id:-1,begin_time:null,description:null,time_len:null},f=(0,T.useState)(u),r=(0,C.Z)(f,2),i=r[0],o=r[1],O=d.Z.useForm(),F=(0,C.Z)(O,1),m=F[0],S=[{title:"\u65E5\u8BB0ID",dataIndex:"id",width:"30%",hideInSearch:!0},{title:"\u5F00\u59CB\u65F6\u95F4",dataIndex:"begin_time",width:"30%",hideInSearch:!0,valueType:"dateTime"},{title:"\u6301\u7EED\u65F6\u957F(\u5206\u949F)",dataIndex:"time_len",width:"30%"},{title:"\u64CD\u4F5C",dataIndex:"id",width:"30%",hideInSearch:!0,render:function(e){return[(0,_.jsx)(g.Z,{onClick:function(){return N(e)},children:"\u7F16\u8F91"}),(0,_.jsx)(g.Z,{onClick:function(){return J(e)},children:"\u5220\u9664"})]}},{title:"\u65E5\u8BB0\u8BE6\u60C5",dataIndex:"description",width:"30%",hideInTable:!0}];console.log(i,"description");var l=(0,T.useRef)();return(0,_.jsxs)(b.ZP,{children:[(0,_.jsx)(W.ZP,{columns:S,request:(0,j.Z)(B().mark(function n(){var e,s,D=arguments;return B().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=D.length>0&&D[0]!==void 0?D[0]:{},s=p(e),console.log(s),c.abrupt("return",(0,E.ZP)("golang/list"+s,{method:"get"}).then(function(h){console.log(h,"res");var Y={data:h.list,total:h.total};return Y}));case 4:case"end":return c.stop()}},n)})),rowKey:"id",search:{labelWidth:"auto"},form:{ignoreRules:!1},pagination:{pageSize:5},actionRef:l,dateFormatter:"string",headerTitle:"\u9AD8\u7EA7\u8868\u683C",toolBarRender:function(){return[(0,_.jsx)(g.Z,{icon:(0,_.jsx)(K.Z,{}),type:"primary",onClick:function(){m.setFieldsValue(u),o({id:null})},children:"\u65B0\u5EFA"},"button")]}}),(0,_.jsx)(Z.Z,{title:"".concat(i&&i.id?"\u7F16\u8F91":"\u65B0\u5EFA","\u65E5\u8BB0"),visible:i.id!==-1,onCancel:function(){return o({id:-1})},onOk:function(){m.submit()},children:(0,_.jsxs)(d.Z,{form:m,onFinish:function(e){console.log(e);var s=(0,a.Z)((0,a.Z)({},e),{},{begin_time:e.begin_time._i});console.log(s,"vvvv"),V((0,a.Z)((0,a.Z)({},e),{},{time_len:Number(e.time_len),begin_time:e.begin_time.format("YYYY-MM-DD HH:mm:ss")}))},children:[(0,_.jsx)(d.Z.Item,{label:"\u5F00\u59CB\u65F6\u95F4",name:"begin_time",rules:[{required:!0}],children:(0,_.jsx)(U.Z,{showTime:!0,onChange:R})}),(0,_.jsx)(d.Z.Item,{label:"\u6301\u7EED\u65F6\u957F",name:"time_len",rules:[{required:!0},{pattern:/^[0-9]*$/,message:"\u8BF7\u8F93\u5165\u6570\u5B57"}],children:(0,_.jsx)(I.Z,{})}),(0,_.jsx)(d.Z.Item,{label:"\u65E5\u8BB0\u8BE6\u60C5",name:"description",rules:[{required:!0}],children:(0,_.jsx)(I.Z.TextArea,{})})]})})]});function N(n){console.log(n,"id"),(0,E.ZP)("golang/getNoteById",{method:"POST",data:{id:n}}).then(function(e){console.log(e,"res"),e.status==="ok"&&(o(e.result),m.setFieldsValue((0,a.Z)((0,a.Z)({},e.result),{},{begin_time:A()(e.result.begin_time)})))})}function J(n){console.log(n,"id"),(0,E.ZP)("golang/delNoteById",{method:"POST",data:{id:n}}).then(function(e){console.log(e,"res"),e.status==="ok"&&(o(u),m.setFieldsValue((0,a.Z)((0,a.Z)({},e.result),{},{begin_time:A()(e.result.begin_time)})),l.current&&l.current.reloadAndRest&&l.current.reloadAndRest())})}function V(n){console.log(n,"data");var e=(0,a.Z)((0,a.Z)({},n),{},{id:i.id||-1});(0,E.ZP)("golang/editNoteById",{method:"POST",data:e}).then(function(s){console.log(s,"res"),s.status==="ok"&&(o(u),v.default.success(s.msg),l.current&&l.current.reloadAndRest&&l.current.reloadAndRest())}).catch(function(){v.default.error("\u64CD\u4F5C\u5931\u8D25")})}function R(n,e){console.log(R,"onChange")}};M.default=x}}]);
